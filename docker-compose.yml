services:
  localbooru-be:
    build: ./localbooru-be
    volumes:
      - ./db:/db
      - ./localbooru-be/assets:/root/assets
    ports:
      - "8080:8080"
    restart: unless-stopped

  localbooru:
    build:
        context: ./localbooru
        args:
          -NEXT_PUBLIC_API_URL: $(NEXT_PUBLIC_API_URL)
    ports:
      - "3000:3000"
    restart: unless-stopped
    env_file:
      - path: localbooru/.env.production
        required: false
      - path: localbooru/.env.development
        required: false
      - path: localbooru/.env.local
        required: false
